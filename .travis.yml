branches:
  except:
  - dev
language: cpp
matrix:
  include:
  - name: linux-x64
    os: linux
    dist: bionic
    env: EXTRA_FLAGS='target_cpu="x64"'
addons:
  apt:
    packages:
script:
  - wget $env:ICCDL -q
  - tar xzvf intel.tar.gz
  - export PATH=~/intel/bin/:$PATH
  - icpc --version
  - icpc -O3 -m64 -o seqmap match.cpp
  - icpc -O3 -m64 -o collect_output collect_output.cpp
  - unzip HG-U133_Plus_2.probe_fasta.zip
  - wget "ftp://ftp.ebi.ac.uk/pub/databases/gencode/Gencode_human/release_35/gencode.v35.transcripts.fa.gz"
  - gzip -d gencode.v35.transcripts.fa.gz
  - ls -al
  - ./seqmap 0 HG-U133_Plus_2.probe_fasta gencode.v35.transcripts.fa results.txt /eland:3 /available_memory:3000 /output_all_matches
env:
  ICCDL:
    secure: acFTmR7FDnX8QzCNlm4khoaSaK+/VR5sY4pSKrk2EhHXLH27RokbsiIbDD18rWAOh2BRriNyuvTIQU7MPwoFImdyiRfV3bMbausgwGOPqdjlumcaCTIICWa82o7J8xzJF4b8z++JBAR7y6fJP6LdC5vTkv+iGH1ipG3Il5AuxVogcQywcUdVNbapDRTK76uriobyPcUH4bpkfIr50WQH67De23M9navuib59Wyc4jb89ceEr/q0+60z3Dx2jd23bhnJW1yKOgqSLWPBjE+8o39ZRl1fXxNaRoNtjymWMIkBS+yZu4YERyzZZ/myTvCY2oP0PzuWsOb+M+Oo+PjOnRIOStvmsfZm1835ayTOZ5R8ZqtkopBXE9+UggvSTWCcHtcWKyoDUVuRAAvIHhE+fEgU0A7Zz/sOG0TZvDuct2rbeSMruZGrXEVEdOgzNF1uZmoFQ0GciZ94dAWpRBa9JKEm3RcErVkXLdgdrRQjCaZGgmFUMvdX/1X6rzCOuu7xjTYegTa9ByRY7ChZcYQDhJHFAEQDxC4lRCI2QKrYPrKgomGmpYOQoxfQdR3kF7UtCeMLe61+TCTLSK2eBTsIYi6F6RCFdeL6EcOPiyB6pUMLh1DiqRuVR8lIJvdu2fSn27fpUHAFCdPIucC7GWDBJ7oOx6kZyq3mkYAn+vZstHiA=
