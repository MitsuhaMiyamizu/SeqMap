# Starter pipeline

# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
- master

pool:
  vmImage: 'vs2017-win2016'

steps:
- script: echo Hello, world!
  displayName: 'Run a one-line script'
#- powershell: Invoke-WebRequest ftp://ftp.ebi.ac.uk/pub/databases/gencode/Gencode_human/release_35/gencode.v35.transcripts.fa.gz -OutFile "gencode.v35.transcripts.fa.gz"
- script: |
    echo Add other tasks to build, test, and deploy your project.
    echo See https://aka.ms/yaml
    dir 'C:\Program Files (x86)\'
    dir 'C:\Program Files (x86)\Microsoft Visual Studio\2019'
#    call "C:\Program Files (x86)\Microsoft Visual Studio\2019\Enterprise\VC\Auxiliary\Build\vcvars64.bat"
#    cl /EHsc match.cpp /link /out:seqmap.exe
#    dir
- task: ExtractFiles@1
  inputs:
    archiveFilePatterns: 'HG-U133_Plus_2.probe_fasta.zip'
    destinationFolder: '.'
    cleanDestinationFolder: false
- task: ExtractFiles@1
  inputs:
    archiveFilePatterns: 'gencode.v35.transcripts.fa.gz'
    destinationFolder: '.'
    cleanDestinationFolder: false
- script: |
    .\seqmap.exe 0 HG-U133_Plus_2.probe_fasta gencode.v35.transcripts.fa results.txt /eland:3 /available_memory:300000 /output_all_matches

  displayName: 'Run a multi-line script'
